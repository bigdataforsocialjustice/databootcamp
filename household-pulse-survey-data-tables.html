<!DOCTYPE html>
<html><head>
			
		<title>Household Pulse Survey Data Tables</title>
		<base href="./">
		<meta id="root-path" root-path="./">

		<link rel="icon" sizes="96x96" href="https://publish-01.obsidian.md/access/f786db9fac45774fa4f0d8112e232d67/favicon-96x96.png">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
		<meta charset="UTF-8">
		<script src="https://code.iconify.design/iconify-icon/1.0.3/iconify-icon.min.js"></script>

			<link rel="stylesheet" href="lib/styles/obsidian-styles.css">
			<link rel="stylesheet" href="lib/styles/theme.css">
			<link rel="stylesheet" href="lib/styles/plugin-styles.css">
			<link rel="stylesheet" href="lib/styles/snippets.css">
			<style>  </style>

			
			<!-- Graph View Data -->
			<script>
			let nodes=
{"nodeCount":33,"linkCount":37,"radii":[7,7,7,6.888888888888889,6.888888888888889,6.626543209876543,6.209876543209877,6.209876543209877,6.209876543209877,5.638888888888889,5.638888888888889,4.913580246913581,4.913580246913581,4.913580246913581,4.033950617283951,4.033950617283951,4.033950617283951,4.033950617283951,4.033950617283951,4.033950617283951,3,3,3,3,3,3,3,3,3,3,3,3,3],"labels":["Day 2","Day 1","Datasets","Day 5","Day 3","Syllabus","Mapping Homelessness in San Diego","Example 1","Day 4","San Diego Regional Data Library data example","National Survey of Child Health","In-school suspensions and academic achievement","Fatal police shootings","Add Health","Geographic differences in discharge dispositions","Housing and Transportation Affordability Index","Household Pulse Survey Data Tables","Final web scrap medium","Consumer Complaints","Add-on Packages & Modules","LODES","Research Reminders","Note taking","Lit Reviews","Daily Note","Example Template","Research Notes","research notes","Research Paper","Research Ideas","focus_group","Cheat Sheet","Highlighting structure"],"paths":["day-2.html","day-1.html","datasets.html","day-5.html","day-3.html","syllabus.html","mapping-homelessness-in-san-diego.html","example-1.html","day-4.html","san-diego-regional-data-library-data-example.html","national-survey-of-child-health.html","in-school-suspensions-and-academic-achievement.html","fatal-police-shootings.html","add-health.html","geographic-differences-in-discharge-dispositions.html","housing-and-transportation-affordability-index.html","household-pulse-survey-data-tables.html","final-web-scrap-medium.html","consumer-complaints.html","add-on-packages-&-modules.html","lodes.html","00-meta/003-tools/research-reminders.html","00-meta/003-tools/note-taking.html","00-meta/003-tools/lit-reviews.html","00-meta/002-templates/daily-note.html","00-meta/002-templates/example-template.html","00-meta/002-templates/research-notes.html","00-meta/002-templates/meta/zdc-templates/research-notes.html","00-meta/002-templates/meta/zdc-templates/research-paper.html","00-meta/002-templates/meta/zdc-templates/research-ideas.html","00-meta/002-templates/meta/zdc-templates/focus_group.html","00-meta/001-structure/cheat-sheet.html","00-meta/001-structure/highlighting-structure.html"],"linkSources":[2,2,2,2,2,2,2,2,2,3,3,3,3,7,7,9,5,5,5,5,5,1,1,1,1,1,0,0,4,4,4,4,8,6,6,6,11],"linkTargets":[0,3,13,18,12,15,10,16,9,13,1,0,4,8,14,8,1,0,4,8,3,19,17,7,2,11,7,10,0,1,10,12,6,9,0,1,0]};
			let attractionForce = 1;
			let linkLength = 10;
			let repulsionForce = 150;
			let centralForce = 3;
			let edgePruning = 100;
			</script>
			
<script type="module" src="lib/scripts/graph_view.js"></script>

<script src="lib/scripts/graph_wasm.js"></script>

<script src="lib/scripts/tinycolor.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.2.4/pixi.min.js" integrity="sha512-Ch/O6kL8BqUwAfCF7Ie5SX1Hin+BJgYH4pNjRqXdTEqMsis1TUYg+j6nnI9uduPjGaj7DN4UKCZgpvoExt6dkw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="lib/scripts/webpage.js"></script>

			</head><body class="theme-dark mod-windows is-frameless is-hidden-frameless obsidian-app show-inline-title show-view-header outliner-plugin-better-lists outliner-plugin-dnd" style="--zoom-factor:1.2; --font-text-size:16px; --line-width:50em; --line-width-adaptive:50em; --file-line-width:50em; --content-width:500em; --sidebar-width:25em; --collapse-arrow-size:0.4em; --tree-horizontal-spacing:1em; --tree-vertical-spacing:0.5em; --sidebar-margin:12px;"><div class="webpage-container"><div class="sidebar-left sidebar"><div class="sidebar-content"><div><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="tree-container file-tree mod-nav-indicator" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Bootcamp</span><button class="clickable-icon collapse-tree-button is-collapsed"><iconify-icon icon="ph:arrows-in-line-horizontal-bold" width="18px" height="18px" rotate="90deg" color="currentColor"></iconify-icon></button></div><div class="tree-scroll-area"></div></div></div></div><div class="document-container"><div class="markdown-preview-view markdown-rendered node-insert-event allow-fold-headings show-indentation-guide allow-fold-lists" tabindex="-1" style="tab-size: 4;"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom: ; padding-top: var(--file-margins); padding-right: var(--file-margins); padding-left: var(--file-margins); width: 100%; position: absolute;"><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="mod-header"><div class="inline-title" contenteditable="true" spellcheck="true" autocapitalize="on" tabindex="-1" enterkeyhint="done">Household Pulse Survey Data Tables</div></div><div><p><em>What can I do with this data</em>? The experimental Household Pulse Survey is designed to quickly and efficiently deploy data collected on how people’s lives have been impacted by the coronavirus pandemic. Data collection for Phase 3.9 of the Household Pulse Survey started on June 7, 2023 and is scheduled to continue until August 7, 2023.&nbsp;Phase 3.9 will continue with a two-weeks on, two-weeks off collection and dissemination approach.&nbsp;The links below will take you to the downloadable tables in XLSX for each release period.</p></div><div><p><strong>Prior data collections phases</strong><br>
- Phase 1: April 23, 2020 - July 21, 2020<br>
- Phase 2: August 19, 2020 - October 26, 2020<br>
- Phase 3: October 28, 2020 - March 29, 2021<br>
- Phase 3.1: April 14, 2021 - July 5, 2021<br>
- Phase 3.2: July 21, 2021 – October 11, 2021<br>
- Phase 3.3: December 1, 2021 – February 7, 2022<br>
- Phase 3.4: March 2, 2022 – May 9, 2022<br>
- Phase 3.5: June 1, 2022 – August 8, 2022<br>
- Phase 3.6: September 14, 2022 – November 14, 2022<br>
- Phase 3.7: December 9, 2022 – February 13, 2023<br>
- Phase 3.8: March 1, 2023 – May 8, 2023</p></div><div><p><em>Note</em>: Phase 1 of the Household Pulse Survey was collected and disseminated on a weekly basis.&nbsp;All later phases of the survey have used&nbsp;two-week collection and dissemination periods. Despite going to a two-week collection period, the Household Pulse Survey continues to call these collection periods "weeks" to maintain continuity. Phases 3.3 and later maintain the two-week collection periods but shifted to a two-weeks on, two-weeks off collection approach. As a result there will continue to be three data collection and dissemination cycles instead of six for Phase 3.8.</p></div><div><hr></div><div><p>I created a script to automatically download and begin to analyze this data. I was interested in debt during the pandemic, however there are a lot of variables that are interesting including depressive symptoms and health behaviors. This script downloads all of the pulse datafiles for the state of <strong>OHIO</strong> for the years that the data are available. It also cleans and merges a few datasets and makes a chart.</p></div><div><p><mark>&gt; You can do this by hand if you have an extra two years or so &lt;</mark></p></div><div><pre class="language-r" tabindex="0"><code class="language-r is-loaded">library<span class="token punctuation">(</span>qdapRegex<span class="token punctuation">)</span>
library<span class="token punctuation">(</span>gdata<span class="token punctuation">)</span>
library<span class="token punctuation">(</span>rvest<span class="token punctuation">)</span>
library<span class="token punctuation">(</span>plyr<span class="token punctuation">)</span>
library<span class="token punctuation">(</span>ggthemes<span class="token punctuation">)</span>
library<span class="token punctuation">(</span>dplyr<span class="token punctuation">)</span>
library<span class="token punctuation">(</span>ggplot2<span class="token punctuation">)</span>

options<span class="token punctuation">(</span>timeout<span class="token operator">=</span><span class="token number">120</span><span class="token punctuation">)</span>

DIR <span class="token operator">&lt;-</span> <span class="token string">"C:/Users/barboza-salerno.1/OneDrive - The Ohio State University/Documents/pulse"</span>

<span class="token comment">#easiest way to get tags of interest</span>
get_refs_on_page <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">{</span>
  refs <span class="token operator">=</span> lapply<span class="token punctuation">(</span>tryCatch<span class="token punctuation">(</span><span class="token punctuation">{</span>readLines<span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> error<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>cond<span class="token punctuation">)</span><span class="token punctuation">{</span>return<span class="token punctuation">(</span><span class="token keyword">NA</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>warning<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span>cond<span class="token punctuation">)</span><span class="token punctuation">{</span>return<span class="token punctuation">(</span><span class="token keyword">NA</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>y<span class="token operator">=</span>rm_between<span class="token punctuation">(</span>x  <span class="token punctuation">,</span> <span class="token string">"href=\""</span><span class="token punctuation">,</span> <span class="token string">"\""</span><span class="token punctuation">,</span> extract<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  refs<span class="token operator">=</span>unlist<span class="token punctuation">(</span>refs<span class="token punctuation">)</span>
  refs <span class="token operator">=</span> refs<span class="token punctuation">[</span><span class="token operator">!</span>is.na<span class="token punctuation">(</span>refs<span class="token punctuation">)</span><span class="token punctuation">]</span>
  return<span class="token punctuation">(</span>refs<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">#this is the census bureau's pulse survey website</span>
page <span class="token operator">&lt;-</span> <span class="token string">"https://www.census.gov/programs-surveys/household-pulse-survey/datasets.html"</span>
a <span class="token operator">&lt;-</span> readLines<span class="token punctuation">(</span>page<span class="token punctuation">)</span>
refs_1 <span class="token operator">=</span> get_refs_on_page<span class="token punctuation">(</span>page<span class="token punctuation">)</span>

<span class="token comment">#find lines associated with CSV zip files</span>
loc.zip <span class="token operator">&lt;-</span> grep<span class="token punctuation">(</span><span class="token string">'_PUF_CSV.zip'</span><span class="token punctuation">,</span> refs_1<span class="token punctuation">)</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">21</span><span class="token operator">:</span>length<span class="token punctuation">(</span>refs_1<span class="token punctuation">[</span>loc.zip<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  refs_1<span class="token punctuation">[</span>loc.zip<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;-</span> paste0<span class="token punctuation">(</span><span class="token string">"https:"</span><span class="token punctuation">,</span> trim<span class="token punctuation">(</span>refs_1<span class="token punctuation">[</span>loc.zip<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

download.files <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> destfile <span class="token operator">=</span> basename<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">1</span><span class="token operator">:</span>length<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    download.file<span class="token punctuation">(</span>url<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> destfile<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment"># iterate and download</span>
download.files<span class="token punctuation">(</span>noquote<span class="token punctuation">(</span>refs_1<span class="token punctuation">[</span>loc.zip<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> basename<span class="token punctuation">(</span>refs_1<span class="token punctuation">[</span>loc.zip<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">#################################### Unzip and read files</span>


<span class="token comment"># get all the zip files</span>
zipF <span class="token operator">&lt;-</span> list.files<span class="token punctuation">(</span>path <span class="token operator">=</span> DIR<span class="token punctuation">,</span> pattern <span class="token operator">=</span> <span class="token string">".zip"</span><span class="token punctuation">,</span> full.names <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>

<span class="token comment"># unzip all your files</span>
ldply<span class="token punctuation">(</span>.data <span class="token operator">=</span> zipF<span class="token punctuation">,</span> .fun <span class="token operator">=</span> unzip<span class="token punctuation">,</span> exdir <span class="token operator">=</span> DIR<span class="token punctuation">)</span>

<span class="token comment"># to illustrate we can read in one file "C:\Users\giaba\Documents\Projects\Debt\pulse\pulse2022_data.dictionary_CSV_45.xlsx"</span>

df_w01 <span class="token operator">&lt;-</span> read.csv<span class="token punctuation">(</span><span class="token string">"C:/Users/barboza-salerno.1/OneDrive - The Ohio State University/Documents/pulse/pulse2020_puf_01.csv"</span><span class="token punctuation">)</span>
df_w45 <span class="token operator">&lt;-</span> read.csv<span class="token punctuation">(</span><span class="token string">"C:/Users/barboza-salerno.1/OneDrive - The Ohio State University/Documents/pulse/pulse2022_puf_45.csv"</span><span class="token punctuation">)</span>
df_w59 <span class="token operator">&lt;-</span> read.csv<span class="token punctuation">(</span><span class="token string">"C:/Users/barboza-salerno.1/OneDrive - The Ohio State University/Documents/pulse/pulse2023_puf_59.csv"</span><span class="token punctuation">)</span>
<span class="token comment"># let's pull out data from California</span>

df_w01 <span class="token operator">&lt;-</span> df_w01 <span class="token percent-operator operator">%&gt;%</span> dplyr<span class="token operator">::</span>filter<span class="token punctuation">(</span>EST_ST <span class="token operator">==</span> <span class="token string">"39"</span> <span class="token punctuation">)</span>
df_w45 <span class="token operator">&lt;-</span> df_w45 <span class="token percent-operator operator">%&gt;%</span> dplyr<span class="token operator">::</span>filter<span class="token punctuation">(</span>EST_ST <span class="token operator">==</span> <span class="token string">"39"</span> <span class="token punctuation">)</span>
df_w59 <span class="token operator">&lt;-</span> df_w59 <span class="token percent-operator operator">%&gt;%</span> dplyr<span class="token operator">::</span>filter<span class="token punctuation">(</span>EST_ST <span class="token operator">==</span> <span class="token string">"39"</span> <span class="token punctuation">)</span>

df_w01 <span class="token operator">&lt;-</span> df_w01 <span class="token percent-operator operator">%&gt;%</span> dplyr<span class="token operator">::</span>select<span class="token punctuation">(</span>MORTCONF<span class="token punctuation">,</span> INCOME<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> mutate<span class="token punctuation">(</span>week <span class="token operator">=</span> <span class="token string">"Week 1"</span><span class="token punctuation">)</span>
df_w45 <span class="token operator">&lt;-</span> df_w45 <span class="token percent-operator operator">%&gt;%</span> dplyr<span class="token operator">::</span>select<span class="token punctuation">(</span>MORTCONF<span class="token punctuation">,</span> INCOME<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> mutate<span class="token punctuation">(</span>week <span class="token operator">=</span> <span class="token string">"Week 45"</span><span class="token punctuation">)</span>
df_co <span class="token operator">&lt;-</span> rbind<span class="token punctuation">(</span>df_w01<span class="token punctuation">,</span> df_w45<span class="token punctuation">)</span>

df_w01 <span class="token operator">&lt;-</span> read.csv<span class="token punctuation">(</span><span class="token string">"C:/Users/barboza-salerno.1/OneDrive - The Ohio State University/Documents/pulse/pulse2020_puf_01.csv"</span><span class="token punctuation">)</span>
df_w01 <span class="token operator">&lt;-</span> df_w01 <span class="token percent-operator operator">%&gt;%</span> dplyr<span class="token operator">::</span>filter<span class="token punctuation">(</span>EST_ST <span class="token operator">==</span> <span class="token string">"39"</span> <span class="token punctuation">)</span>
df_w01_1 <span class="token operator">&lt;-</span> df_w01 <span class="token percent-operator operator">%&gt;%</span> dplyr<span class="token operator">::</span>select<span class="token punctuation">(</span>WORRY<span class="token punctuation">,</span> INTEREST<span class="token punctuation">,</span> DOWN<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> mutate<span class="token punctuation">(</span>week <span class="token operator">=</span> <span class="token string">"Week 1"</span><span class="token punctuation">)</span>

df_w59 <span class="token operator">&lt;-</span> df_w59 <span class="token percent-operator operator">%&gt;%</span> dplyr<span class="token operator">::</span>select<span class="token punctuation">(</span>WORRY<span class="token punctuation">,</span> INTEREST<span class="token punctuation">,</span> DOWN<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> dplyr<span class="token operator">::</span>mutate<span class="token punctuation">(</span>week <span class="token operator">=</span> <span class="token string">"Week 59"</span><span class="token punctuation">)</span>

df_co1 <span class="token operator">&lt;-</span> rbind<span class="token punctuation">(</span>df_w01_1<span class="token punctuation">,</span> df_w59<span class="token punctuation">)</span>


df_co1<span class="token punctuation">[</span>df_co1<span class="token operator">==</span><span class="token operator">-</span><span class="token number">88</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> <span class="token keyword">NA</span>
df_co1<span class="token punctuation">[</span>df_co1<span class="token operator">==</span><span class="token operator">-</span><span class="token number">99</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> <span class="token keyword">NA</span>
df_co1<span class="token operator">$</span>dep_sym <span class="token operator">&lt;-</span> df_co1<span class="token operator">$</span>WORRY <span class="token operator">+</span>df_co1<span class="token operator">$</span>INTEREST <span class="token operator">+</span>df_co1<span class="token operator">$</span>DOWN
df_co1 <span class="token percent-operator operator">%&gt;%</span> group_by<span class="token punctuation">(</span>week<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> summarise_each<span class="token punctuation">(</span>funs<span class="token punctuation">(</span>mean<span class="token punctuation">(</span>.<span class="token punctuation">,</span> na.rm <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

df_co<span class="token punctuation">[</span>df_co<span class="token operator">==</span><span class="token operator">-</span><span class="token number">88</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> <span class="token keyword">NA</span>
df_co<span class="token operator">$</span>INCOME<span class="token punctuation">[</span>df_co<span class="token operator">$</span>INCOME<span class="token operator">==</span><span class="token operator">-</span><span class="token number">99</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> <span class="token keyword">NA</span>
df_co<span class="token operator">$</span>MORTCONF<span class="token punctuation">[</span>df_co<span class="token operator">$</span>MORTCONF<span class="token operator">==</span><span class="token operator">-</span><span class="token number">99</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> <span class="token keyword">NA</span>
table<span class="token punctuation">(</span>df_co<span class="token operator">$</span>MORTCONF<span class="token punctuation">)</span>
table<span class="token punctuation">(</span>df_co<span class="token operator">$</span>INCOME<span class="token punctuation">)</span>


summary<span class="token punctuation">(</span>df_co<span class="token operator">$</span>INCOME<span class="token punctuation">)</span>
df_co<span class="token operator">$</span>Inc_cat <span class="token operator">&lt;-</span> cut<span class="token punctuation">(</span>df_co<span class="token operator">$</span>INCOME<span class="token punctuation">,</span> breaks<span class="token operator">=</span>c<span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3.000</span><span class="token punctuation">,</span> <span class="token number">6.000</span><span class="token punctuation">,</span> <span class="token number">Inf</span><span class="token punctuation">)</span><span class="token punctuation">,</span> labels<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token string">"Low Income"</span><span class="token punctuation">,</span> <span class="token string">"Middle Income"</span><span class="token punctuation">,</span> <span class="token string">"High Income"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df_co <span class="token operator">&lt;-</span> df_co <span class="token percent-operator operator">%&gt;%</span> mutate<span class="token punctuation">(</span>MORTCONF<span class="token operator">=</span>recode<span class="token punctuation">(</span>MORTCONF<span class="token punctuation">,</span> 
                         `<span class="token number">1</span>`<span class="token operator">=</span><span class="token string">"Not at all/Slightly"</span><span class="token punctuation">,</span>
                         `<span class="token number">2</span>`<span class="token operator">=</span><span class="token string">"Not at all/Slightly"</span><span class="token punctuation">,</span>
                         `<span class="token number">3</span>`<span class="token operator">=</span><span class="token string">"Moderately"</span><span class="token punctuation">,</span>
                         `<span class="token number">4</span>`<span class="token operator">=</span><span class="token string">"Highly"</span><span class="token punctuation">,</span>
              
                         
                         <span class="token punctuation">)</span><span class="token punctuation">)</span>


table<span class="token punctuation">(</span>df_co<span class="token operator">$</span>Inc_cat<span class="token punctuation">,</span> df_co<span class="token operator">$</span>MORTCONF<span class="token punctuation">)</span>

toPlot<span class="token operator">&lt;-</span>df_co<span class="token percent-operator operator">%&gt;%</span> filter<span class="token punctuation">(</span><span class="token operator">!</span>is.na<span class="token punctuation">(</span>MORTCONF<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token operator">!</span>is.na<span class="token punctuation">(</span>Inc_cat<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  dplyr<span class="token operator">::</span>group_by<span class="token punctuation">(</span>Inc_cat<span class="token punctuation">,</span> MORTCONF<span class="token punctuation">,</span> week<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  dplyr<span class="token operator">::</span>summarise<span class="token punctuation">(</span>n <span class="token operator">=</span> n<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  dplyr<span class="token operator">::</span>group_by<span class="token punctuation">(</span>MORTCONF<span class="token punctuation">,</span> week<span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
  dplyr<span class="token operator">::</span>mutate<span class="token punctuation">(</span>prop <span class="token operator">=</span> n<span class="token operator">/</span>sum<span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>


ggplot<span class="token punctuation">(</span>data <span class="token operator">=</span> subset<span class="token punctuation">(</span>toPlot<span class="token punctuation">,</span> <span class="token operator">!</span>is.na<span class="token punctuation">(</span>MORTCONF<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token operator">!</span>is.na<span class="token punctuation">(</span>Inc_cat<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> aes<span class="token punctuation">(</span>Inc_cat <span class="token punctuation">,</span> prop<span class="token punctuation">,</span> fill <span class="token operator">=</span> MORTCONF<span class="token punctuation">,</span> na.rm <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
  geom_col <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
  facet_grid<span class="token punctuation">(</span><span class="token operator">~</span>week<span class="token operator">+</span>MORTCONF<span class="token punctuation">)</span><span class="token operator">+</span>scale_fill_manual<span class="token punctuation">(</span>values <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"blue"</span><span class="token punctuation">,</span><span class="token string">"green"</span><span class="token punctuation">,</span> <span class="token string">"red"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
  labs<span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token string">"Confidence in Ability to Pay Mortgage"</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token string">"Proportion of Respondents"</span><span class="token punctuation">,</span> title <span class="token operator">=</span> <span class="token string">"Income and Mortgage Dept"</span><span class="token punctuation">,</span> 
       subtitle <span class="token operator">=</span> <span class="token string">"How confident are you that your household will be able to pay your next rent or mortgage payment on time?\nWeeks 1 and Week 45"</span><span class="token punctuation">,</span> fill <span class="token operator">=</span> <span class="token string">'Income Categories'</span><span class="token punctuation">)</span><span class="token operator">+</span>
  scale_color_fivethirtyeight<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  theme_fivethirtyeight<span class="token punctuation">(</span><span class="token punctuation">)</span> 
</code><button class="copy-code-button">Copy</button></pre></div><div><p><span alt="Rplot20.png" src="Rplot20.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Rplot20.png" src="rplot20.png"></span><br>
<strong>Fig 1</strong>. Income categories and mortgage debt for Week 1 of the COVID-19 pandemic.<br>
<span alt="Rplot21.png" src="Rplot21.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Rplot21.png" src="rplot21.png"></span><br>
<strong>Fig 2</strong>. Income categories and mortgage debt for Week 45 of the COVID-19 pandemic.</p></div><div class="mod-footer"><div class="embedded-backlinks" style="display: none;"></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-content"><span class="sidebar-section-header">Interactive Graph</span><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-arrow-up-right"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" width="512px" height="512px"></canvas>
		</div>
		</div><div class="tree-container outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button"><iconify-icon icon="ph:arrows-in-line-horizontal-bold" width="18px" height="18px" rotate="90deg" color="currentColor"></iconify-icon></button></div><div class="tree-scroll-area"></div></div></div></div></div></body></html>